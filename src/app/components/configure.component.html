<div id="content">
  <h2 md-dialog-title>Settings</h2>

  <div id="configuration">
    <div class="alert" *ngIf="state.error" [innerHTML]="state.errorMessage"></div>
    <form (ngSubmit)="save()" #settingsForm="ngForm" novalidate>

      <h4 md-dialog-title>API Settings</h4>
      <md-input-container class="wide">
        <input md-input type="text" [(ngModel)]="settings.apiUrl" name="apiUrl" placeholder="Instagram API URL">
      </md-input-container>
      <md-input-container class="wide">
        <input md-input type="text" [(ngModel)]="settings.authUrl" name="authUrl" placeholder="Instagram Authentication Endpoint">
      </md-input-container>
      <md-input-container class="wide">
        <input md-input type="text" [(ngModel)]="settings.redirectUrl" name="redirectUrl" placeholder="Redirect URL">
      </md-input-container>
      <md-input-container class="wide">
        <input md-input type="text" [(ngModel)]="settings.clientId" name="clientId" placeholder="Client ID">
      </md-input-container>

      <h4 md-dialog-title>From Accounts</h4>
      <table class="wide">
        <tr *ngFor="let account of settings.fromAccounts; let i = index; trackBy:trackByIndex">
          <td class="button-cell">
            <button md-mini-fab md-micro-fab type="button" color="warn" (click)="removeAccount('from',i)" title="Remove Account"><md-icon>clear</md-icon></button>
          </td>
          <td><a href="https://www.instagram.com/{{ settings.fromAccounts[i].username }}" target="_BLANK">{{ settings.fromAccounts[i].username }}</a> ({{ settings.fromAccounts[i].name }})</td>
        </tr>
        <tr>
          <td colspan="2">
            <button md-mini-fab md-micro-fab type="button" color="accent" (click)="addAccount('from')" title="Add New Account">
              <md-icon>add</md-icon>
            </button>
          </td>
        </tr>
      </table>

      <h4 md-dialog-title>To Accounts</h4>
      <table class="wide">
        <tr *ngFor="let account of settings.toAccounts; let i = index; trackBy:trackByIndex">
          <td class="button-cell">
            <button md-mini-fab md-micro-fab color="warn" type="button" (click)="removeAccount('to',i)" title="Remove Account"><md-icon>clear</md-icon></button>
          </td>
          <td><a href="https://www.instagram.com/{{ settings.toAccounts[i].username }}" target="_BLANK">{{ settings.toAccounts[i].username }}</a> ({{ settings.toAccounts[i].name }})</td>
        </tr>
        <tr>
          <td colspan="2">
            <button md-mini-fab md-micro-fab color="accent" type="button" (click)="addAccount('to')" title="Add New Account">
              <md-icon>add</md-icon>
            </button>
          </td>
        </tr>
      </table>

      <button class="h-pad" md-raised-button color="primary" type="submit">Save</button>
    </form>
  </div>
</div>